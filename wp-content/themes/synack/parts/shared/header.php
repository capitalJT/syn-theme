<?php
/**
 * Template Part for header
 *
 * @package WordPress
 * @subpackage Synack
 * @author John Robson
 * @since 2.0
 */
?>
    <header>
        <div class="contained">
            <div class="header-logo">
                <h2 class="hidden"><?php echo bloginfo('name'); ?></h2>

                <a href="<?php echo esc_url( home_url() ) ;?>" class="logo">
                    <svg class="svg-logo" width="100px" height="26px" viewBox="0 0 100 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <path class="text" d="M75.1217756,9.36694085 L75.1217756,7.82413397 L77.6617861,7.82413397 L77.6617861,18.4125749 L75.1217756,18.4125749 L75.1217756,16.8888539 C74.4431286,18.1232887 73.0276424,18.7403483 71.5344606,18.7403483 C68.1223569,18.7403483 66.1254225,16.0982856 66.1254225,13.1087326 C66.1254225,9.77200455 68.5490483,7.49620273 71.5344606,7.49620273 C73.4738368,7.49620273 74.6567122,8.51848382 75.1217756,9.36694085 Z M75.1414373,13.2051087 C75.1606233,12.7035111 75.0639003,12.1828276 74.8503168,11.7200329 C74.4047565,10.7171532 73.4154859,9.84913701 71.8837734,9.84913701 C69.8284881,9.84913701 68.6652745,11.5077214 68.6652745,13.1472199 L68.6652745,13.1666213 C68.6652745,14.4780308 69.6153802,16.3875718 71.9032766,16.3875718 C73.3186043,16.3875718 74.249524,15.6545768 74.7342491,14.6901845 C74.9860461,14.2273898 75.1025895,13.7259499 75.1414373,13.2051087 Z M84.21834,9.84913701 C83.2874203,9.83005106 82.5700842,10.1579823 81.9496297,10.7557983 C81.4067122,11.3342128 81.0775367,12.1828276 81.0775367,13.1087326 C81.0775367,15.017958 82.4153274,16.3683281 84.21834,16.3683281 C85.8077692,16.3683281 86.6999997,15.4230217 87.0876847,14.5551633 L89.6857291,14.5551633 C89.0846191,16.9082553 86.9714584,18.7403483 84.21834,18.7403483 C80.844767,18.7403483 78.5181815,16.1367731 78.5181815,13.1087326 C78.5181815,9.98431597 80.9414901,7.49620273 84.1212999,7.49620273 C86.7968813,7.49620273 89.0652745,9.17418857 89.6857291,11.7585202 L87.0876847,11.7585202 C86.6416488,10.6400207 85.6141645,9.84913701 84.21834,9.84913701 Z M53.0522724,7.82413397 L55.7300736,7.82413397 C55.7300736,7.82413397 51.7354119,18.1955314 51.242283,19.4381684 C50.6370503,20.9639398 49.9152745,22.5786739 48.0548623,22.5786739 C47.2642702,22.5786739 46.6236783,22.477408 46.1833506,22.3778771 L46.1833506,20.2637537 C47.4900631,20.4306376 48.1113105,20.5684979 48.8968284,18.4125749 L44.6636889,7.82413397 L47.5251053,7.82413397 L50.1875261,15.1203281 L53.0522724,7.82413397 Z M41.0020081,10.0267467 C43.8290166,10.8398711 45.1073464,11.8566314 45.1073464,14.3639884 C45.1073464,16.8716608 43.4884246,18.5998064 40.0482555,18.5998064 C37.6917016,18.5998064 36.1506339,18.1389044 35.347357,17.8374727 L35.347357,15.3356365 C35.347357,15.3356365 37.663636,16.3293675 39.8438686,16.3293675 C41.9216699,16.3293675 42.2963527,15.0755314 42.2963527,14.4994828 C42.2963527,13.923592 42.1133718,13.0098327 39.8808136,12.4396203 C36.4715641,11.5689226 35.0573464,10.5010561 35.0573464,7.85804701 C35.0573464,5.41835843 36.846247,3.88801263 40.014006,3.88801263 C41.9192914,3.88801263 43.3848834,4.28471637 44.2011624,4.57400252 L44.2011624,7.08419868 C44.2011624,7.08419868 41.9556022,6.16381445 40.2524838,6.16381445 C38.549524,6.16381445 37.7946085,7.04492264 37.7946085,7.8242917 C37.7946085,8.60350303 38.1748411,9.2134646 41.0020081,10.0267467 Z M60.369767,7.3504555 C63.0486783,7.3504555 65.4038051,9.51032204 65.4038051,12.1750986 L65.4038051,18.4125749 L62.8750525,18.4125749 L62.8750525,12.1063261 C62.8750525,10.8310379 61.6519024,9.79724216 60.369767,9.79724216 C59.0881075,9.79724216 57.8649574,10.8310379 57.8649574,12.1063261 L57.8649574,18.4125749 L55.3358876,18.4125749 L55.3358876,12.1750986 C55.3358876,9.51032204 57.6913316,7.3504555 60.369767,7.3504555 Z M90.4758453,3.36969514 L93.0153802,3.36969514 L93.0153802,12.3883564 L96.5322935,7.82508038 L99.7232026,7.82508038 L95.6570292,12.8167649 L99.7427058,18.4125749 L96.724154,18.4125749 L94.0577692,14.5706213 L93.0153802,15.8892866 L93.0153802,18.4125749 L90.4758453,18.4125749 L90.4758453,3.36969514 Z"></path>
                        <path class="badge" d="M15.4940803,1.76063903 L18.3453489,6.67329829 L12.6429705,6.67329829 L15.4940803,1.76063903 Z M7.51775899,4.47210515 C12.607611,6.98703337 14.0471987,13.0767119 14.4160148,17.2286148 L3.37024313,10.7499616 L2.12854123,6.81825682 L10.3184461,11.623183 C9.377537,9.36268149 8.01326639,7.78580384 6.2486258,6.92583215 L6.20169133,6.90296057 L1.23932347,4.00363195 L1.77635684e-15,0.0798139535 L7.51775899,4.47210515 Z M4.19413319,13.3577957 L15.4942389,19.9779373 L26.794186,13.3577957 L25.552167,17.2895005 L18.2327695,21.5822609 L20.0608351,22.6532821 L20.0638477,25.8685541 L15.4942389,23.1884772 L10.9244715,25.8685541 L10.9274841,22.6532821 L12.7555497,21.5822609 L5.43615222,17.2895005 L4.19413319,13.3577957 Z M24.7393764,6.92583215 C22.9750528,7.78580384 21.6106236,9.36268149 20.6698732,11.623183 L28.8599366,6.81825682 L27.617759,10.7499616 L16.5723044,17.2286148 C16.9408034,13.0767119 18.3803911,6.98703337 23.4707189,4.47210515 L30.9880022,0.0798139535 L29.7486786,4.00363195 L24.7864693,6.90296057 L24.7393764,6.92583215 Z"></path>
                    </svg>
                </a>
            </div>

            <div class="menu-toggle">
                <button type="button" aria-label="Menu" class="hamburger">
                    <div class="padding-wrap">
                        <span class="line-wrap">
                            <span class="line line-top"></span>
                            <span class="line line-middle"></span>
                            <span class="line line-bottom"></span>
                        </span>
                    </div>
                </button>
            </div>

            <div class="menu-nav-wrap">

                <div class="pattern-background"></div>

                <nav class="main-menu" role="navigation">
                    <?php $locations = get_nav_menu_locations();
                    if (!empty($locations) && isset($locations['primary'])) { ?>

                        <?php wp_nav_menu(
                            array(
                                 'container' => '',
                                'container_class' => '',
                                'theme_location' => 'primary',
                                'menu_class' => 'header-menu',
                                'items_wrap' => '<ul class="%2$s">%3$s</ul>'
                            )
                        ); ?>

                    <?php } ?>
                </nav>

                <nav class="action-menu" role="navigation">
                    <?php if(get_option('options_login_url' )){?>
                        <a href="<?php echo get_option('options_login_url' );?>" class="log-in">
                            <svg class="log-in-icon" width="14px" height="13px" viewBox="0 0 14 13" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                <path d="M8,9.041 L8,8.216 C9.102,7.595 10,6.048 10,4.5 C10,2.015 10,0 7,0 C4,0 4,2.015 4,4.5 C4,6.048 4.898,7.595 6,8.216 L6,9.041 C2.608,9.318 0,10.985 0,13 L14,13 C14,10.985 11.392,9.318 8,9.041 Z"></path>
                            </svg>
                            <span>Log In</span>
                        </a>
                    <?php } ?>
                    <?php if(get_option('options_contact_url' )){?>
                        <a href="<?php echo get_permalink( get_option('options_contact_url' ) );?>" class="contact-us">Contact Us</a>
                    <?php } ?>
                </nav>

            </div>
        </div>

        <script type="text/javascript">

            // polyfills
            (function() {
                if (typeof NodeList.prototype.forEach === "function")
                    return false;
                else
                    NodeList.prototype.forEach = Array.prototype.forEach;
            })();
            (function(){
                if (!String.prototype.includes) {
                    String.prototype.includes = function(search, start) {
                        'use strict'
                        if (typeof start !== 'number') {
                            start = 0
                        }

                        if (start + search.length > this.length) {
                            return false
                        } else {
                            return this.indexOf(search, start) !== -1
                        }
                    }
                }
            })()

            // toggle body class
            document.querySelector('button.hamburger').addEventListener('click', function(){
                document.body.classList.toggle('menu-opened');

                if (!document.body.classList.contains('menu-opened')){
                    document.body.classList.add('menu-transition-active');
                    setTimeout(function(){
                        document.body.classList.remove('menu-transition-active')
                    }, 400);
                }
            });

            // add briefing class if menu item present
            const menuItems = document.querySelectorAll('.header-menu .menu-item')
            for(var i = 0; i < menuItems.length; i++){
                const link = menuItems[i].querySelector('a')
                if (link && link.innerHTML.indexOf('Briefing') != -1) {
                    menuItems[i].classList.add('the-briefing');
                }
            }

        </script>
    </header>
